<html>
<head>
	<title>Het Rijksmuseum Memory Spel</title>
	<link rel="stylesheet" href="css/style.css"></link>
	<link href='http://fonts.googleapis.com/css?family=Cardo' rel='stylesheet' type='text/css'>
</head>
<body>
	
<div id="settings">
	<h1>Het Rijksmuseum Memory Spel</h1>
	
	<div class="items">
		<div class="lbl-qry">Find your set</div>
		<div id="qry" class="inputBtn" contenteditable="true"></div>
	</div>
	<div class="items">
		<div class="lbl-qry">Uitleg over het spel</div>
		<div class="bodytext">
			<p>
				Aaaah
			</p>
		</div>
	</div>
	<div id="submit" class="submitBtn">play</div>
</div>

<script src="http://code.jquery.com/jquery-1.6.4.js"></script>
<script src="js/Sprite3D.min.js"></script>
<script src="js/stats.js"></script>
<script src="js/utils.js"></script>
<script src="js/memory.js"></script>
<script src="js/card.js"></script>
<script src="js/settings.js"></script>
<script>

$('#submit').click(function(e){
	var qry = $('#qry').text();
	$.getJSON("http://nbl01.local/rijks/json.php?qry="+qry+"&callback=?", {}, function(data) {
		$('#settings').hide();
		init(data);
	});
});

var Stage = Sprite3D.createCenteredContainer();
var Sprites = [];
var game;

function init(set) {
		console.log(set.length);

	var cards = [];
	var cols = 5;
	var rows = ~~(set.length / cols);
	for (var s=0 ; s<set.length ; s++)
	{
		var obj = set[s];

		obj.found = false;

		cards.push( new Card(obj) );
		cards.push( new Card(obj) );
	}

	game = new Memory(cards);
}

function update(t) {

	for (var s=0 ; s<Sprites.length ; s++) {
		var sprite = Sprites[s];
		//sprite.update();
		//var yRot = ((t) / 10) % 1000;
		//sprite.setRotation(0, yRot ,0).update();
	}
}

var loop = function() {
	var t = new Date();
	//document.title = t;
	update(t);
	stats.update();
	requestAnimFrame(loop)
}

var stats = new Stats();

// Align top-left
stats.domElement.style.position = 'absolute';
stats.domElement.style.left = '0px';
stats.domElement.style.top = '0px';

document.body.appendChild(stats.domElement);


loop();


</script>
</body>
</html>
